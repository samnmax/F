.requestMatchers("/admin/**").hasRole("ADMIN")
package com.example.demo.controller;

import com.example.demo.entity.User;
import com.example.demo.repository.UserRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/admin")
public class AdminController {

    @Autowired
    private UserRepository userRepository;

    // 관리자 대시보드용 사용자 전체 조회 API
    @GetMapping("/users")
    public List<User> listAllUsers() {
        return userRepository.findAll();
    }

    // 관리자 페이지 확인용 HTML
    @GetMapping("/dashboard")
    public String adminPage() {
        return """
            <html>
              <body>
                <h2>관리자 대시보드</h2>
                <p>여긴 ROLE_ADMIN 사용자만 접근할 수 있습니다.</p>
                <p><a href="/admin/users">[모든 사용자 조회]</a></p>
                <a href="/">메인으로</a>
              </body>
            </html>
            """;
    }
}

UPDATE USER SET role='ROLE_ADMIN' WHERE username='admin';
